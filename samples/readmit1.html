<!doctype html>
<html>
  <head>
    <title>Line Chart</title>
    <script src="../Chart.js"></script>
    <style>
      #left {
        float: left;
        width: 50%;
        border-right: 1px solid black;
      }
      #right {
        width: 40%;
        float: left;
        padding-left: 15px;
      }
    </style>
  </head>
  <body>
    <div id="wrapper">
      <div id="left">
        <canvas id="canvas" height="450" width="600"></canvas>
      </div>
      <div id="right">
        <h1>Click Any Week For It's Data Summary</h1>
        <p></p>
      </div>
    </div>
    <script>
      var randomScalingFactor = function(){ return Math.round(Math.random()*100)};
      var lineChartData = {
      labels : ["Week 1","Week 2", "Week 3", "Week 4", "Week 5","Week 6"],
      datasets : [
      {
      label: "Readmission probability",
      fillColor : "rgba(220,220,220,0.2)",
      strokeColor : "rgba(220,220,220,1)",
      <!-- pointColor : "rgba(220,220,220,1)", -->
      pointColor : "rgba(255, 44, 44, 0.9)",
      pointStrokeColor : "#fff",
      pointHighlightFill : "#fff",
      pointHighlightStroke : "rgba(220,220,220,1)",
      data : [0.2,0.46,0.74,0.6,0.53,0.4]
      
      },
      {
      label: "Upper bounds",
      fillColor : "rgba(151,187,205,0.2)",
      strokeColor : "rgba(151,187,205,1)",
      pointColor : "rgba(151,187,205,1)",
      pointStrokeColor : "#fff",
      pointHighlightFill : "#fff",
      pointHighlightStroke : "rgba(151,187,205,1)",
      data : [0.259,0.5,0.756,0.68,0.625,0.443]									  
      },		
      {
      label: "Lower bounds",
      fillColor : "rgba(255,255,255,1)",
      strokeColor : "rgba(215, 40, 40, 0.9);",
      pointColor : "rgba(151,187,205,1)",
      pointStrokeColor : "#fff",
      pointHighlightFill : "#fff",
      pointHighlightStroke : "rgba(151,187,205,1)",
      data : [0.105,0.365,0.645,0.505,0.435,0.305]									  
      }		
      ] <!-- end datasets -->

      }

      window.onload = function(){
        var ctx = document.getElementById("canvas").getContext("2d");
        window.myLine = new Chart(ctx).Line(lineChartData, {
            responsive: true
        });
        var right = document.getElementById("right");
        statHeader = right.getElementsByTagName("h1")[0];
        statContainer = right.getElementsByTagName("p")[0];
      }
      
      var statHeader;
      var statContainer;

      canvas.onclick = function(event) {
          var activePoints = window.myLine.getPointsAtEvent(event);
          if(activePoints.length) { // If there are points on the clicked-upon line.
              // Use the below line to view the data.
              // alert(JSON.stringify(activePoints));
              
              // Display a "Data Summary" for the selected week.
              var week = activePoints[0].label;
              statHeader.innerHTML = "Data Summary: " + week; 
              statContainer.innerHTML = "";
              for(var index in activePoints) {
                  var point = activePoints[index];
                  statContainer.innerHTML += point.datasetLabel + ": " + point.value + "<br>";
              }
          }
          
      };

    </script>
  </body>
</html>